function msieversion(){var t=window.navigator.userAgent,i=t.indexOf("MSIE ");return i>0?parseInt(t.substring(i+5,t.indexOf(".",i))):ieDebug}function checkIeSupport(){version=msieversion(),0!=version&&(window.kitAttr="data-",$models.each(function(){var t=[],i=[],o=[],e=[];e=this.attributes;for(var n=0;n<e.length;n++)0==e[n].name.indexOf(kitAttrs)&&(o[n]=e[n].name,t[n]="data-"+o[n].split("-")[1],i[n]=$(this).attr(e[n].name));for(var n=0;n<t.length;n++)$(this).attr(t[n],i[n]),$(this).removeAttr(o[n])}))}function getRootURL(){""==_ROOT&&(window._ROOT=$("["+kitAttr+"root]").attr(kitAttr+"root"))}function checkTouchPatch(){var t="ontouchstart"in window||navigator.msMaxTouchPoints>0;t&&$("<link/>",{rel:"stylesheet",type:"text/css",href:"patch/patch-touch.min.css"}).appendTo("head")}window.ieDebug=0,window.ieFlag=!1,window.kitAttr="dkit-",window.kitAttrs=kitAttr,window._ROOT="";var $models=$("div, pre, blockquote, dl, dt, dd, p, ol, ul, li, br, hr, figcaption, figure, body, aside, adress, h1, h2, h3, h4, h5, h6, nav, main, section, header, article, footer, col, colgroup, caption, table, tr, td, th, tbody, thead, tfoot, img, area, map, embed, object, param, source, iframe, canvas, track, audio, video, strong");$(document).ready(function(){checkIeSupport(),getRootURL(),checkTouchPatch()});var DROPDOWN=function(t){var i=t("["+kitAttr+"dropdown]"),o=!1,e={},n=function(t){var n=t.next();o&&i.find("span").removeClass("icon-arrow-up").parent().next().fadeOut(),n.is(":visible")?h(t):(t.find("span").addClass("icon-arrow-up"),n.stop().fadeIn(),o=!0,e=t)},s=function(t){var i=t.parent().parent(),n=i.prev(),s=t.text();i.fadeOut(),n.find("span").removeClass("icon-arrow-up"),o=!1,e={},"self"==n.attr(kitAttr+"dropdown")&&n.html(s+'<span class="icon-arrow-down"></span>')},h=function(t){var i=t.next();t.find("span").removeClass("icon-arrow-up"),i.stop().fadeOut(),o=!1,e={}},c=function(o){var e=i.next();e.unbind("mouseenter"),e.on("mouseenter",function(){t("body").css({overflow:"hidden"})}),e.on("mouseleave",function(){t("body").css({overflow:""})})},r=function(t){var i=t.pageX,o=t.pageY;if(e.length){var n=e.offset(),s=e.outerWidth(),c=e.outerHeight();i>=n.left&&o>=n.top&&i<=n.left+s&&o<=n.top+c||h(e)}};return{init:function(){i.on("click",function(){n(t(this))}),i.next().find("a").on("click",function(){s(t(this))}),t(window).on("scroll",function(){c(t(this))}),t("html").on("click",function(t){r(t)})}}}($).init(),FIXHEIGHT=function(t){var i=function(){var i=0,o="top",e=[],n=0,s=0,h=t("["+kitAttr+'fixHeight="child"]'),c=t("["+kitAttr+'fixHeight="parent"]');h.css({paddingBottom:"",paddingTop:"",height:""}),c.each(function(h,c){if(t(this).find("["+kitAttr+'fixHeight="child"]').css("padding-top"))var r=(parseInt(t(this).find("["+kitAttr+'fixHeight="child"]').css("padding-top").split("px")[0])+parseInt(t(this).find("["+kitAttr+'fixHeight="child"]').css("padding-bottom").split("px")[0]))/2;t(this).find("["+kitAttr+'fixHeight="child"]').each(function(i,o){e.push(t(this).height()),s++}),n=Math.max.apply(Math,e),t(this).find("["+kitAttr+'fixHeight="child"]').each(function(e,s){i=t(this).attr(""+kitAttr+"fixheightstopat")||0,o=t(this).attr(""+kitAttr+"fixheightorient")||"top",t(window).width()>i?(checkHeight=t(this).height(),checkHeight<n&&("top"==o&&t(this).css({paddingBottom:n-checkHeight+r}),"bottom"==o&&t(this).css({paddingTop:n-checkHeight}),"center"==o&&t(this).css({paddingTop:(n-checkHeight)/2,paddingBottom:(n-checkHeight)/2}))):t(this).css({paddingBottom:"",paddingTop:"",height:""}),i=0}),e=[],n=0,s=0})};return{init:function(){t(window).resize(i),t(window).on("load",i)},callbackInit:function(){i()}}}($),FIXVERTICAL=function(t){var i=0,o=0,e=[],n=[],s=t("["+kitAttr+'vertical="parent"]'),h=t("["+kitAttr+'vertical="child"]'),c=function(){i=0,o=0,e=[],n=[],s.each(function(o,n){e.push(t(this).height()),i+=1}),h.each(function(i,o){var e=t(this).attr(""+kitAttr+"verticalstopat")||0,n=t(window).width();null!=e&&e<=n?a(t(this)):null==e?a(t(this)):r(t(this))})},r=function(i){h.each(function(o,e){t(i).css({"margin-top":0})})},a=function(i){n.push(t(i).height()),t(i).css({"margin-top":e[o]/2-n[o]/2}),o+=1};return{init:function(){t(window).load(function(){c()}),t(window).on("resize",function(){c()})}}}($),LIGHTBOX=function(t){function i(t,i,o){this.url=t,this.desc=i,this.title=o}var o=t("["+kitAttr+'lightbox^="child"]'),e={},n=0,s=0,h=0,c=0,r=0,a=0,l=140,d=!1,g=0,u=!0,x='<div class="Lightbox"><div class="Lightbox-mobile_info"><div class="mobile_info" '+kitAttr+'grid="col-12"><span class="mobile_title"></span><span class="mobile_desc"></span></div></div><div class="Lightbox-close"><img src="lib/ressources/lightbox/lightbox-close.svg" onerror="lib/ressources/lightbox/lightbox-close.png"></div><div class="Lightbox-num"></div><div class="Lightbox-wrapper" '+kitAttr+'grid="grid-wrapper"><div class="Lightbox-view" '+kitAttr+'grid="col-12"><div class="Lightbox-info"><div class="info_wrapper"><span class="info_title"></span><span class="info_desc"></span></div></div><div class="Lightbox-back"><img src="lib/ressources/lightbox/lightbox-back.svg" onerror="lib/ressources/lightbox/lightbox-back.png"></div><div class="Lightbox-next"><img src="lib/ressources/lightbox/lightbox-next.svg" onerror="lib/ressources/lightbox/lightbox-next.png"></div><div class="Lightbox-image"></div></div></div><div class="Lightbox-mobile" '+kitAttr+'grid="col-12"><div class="Lightbox-nav_mobile" '+kitAttr+'grid="grid-wrapper"><div class="Lightbox-back_mobile" '+kitAttr+'grid="col-2"><img src="lib/ressources/lightbox/lightbox-back.svg" onerror="lib/ressources/lightbox/lightbox-back.png"></div><div class="Lightbox-menu" '+kitAttr+'grid="col-8"><span id="Lightbox-descBtn" class="menu-title">Description <img class="desc" src="lib/ressources/lightbox/lightbox-desc.svg" onerror="lib/ressources/lightbox/lightbox-desc.png"></span></div><div class="Lightbox-next_mobile" '+kitAttr+'grid="col-2"><img src="lib/ressources/lightbox/lightbox-next.svg" onerror="lib/ressources/lightbox/lightbox-next.png"></div></div></div></div>',p=function(){t("body").prepend(x),g=t(this).attr(""+kitAttr+"lightboxPos"),currentImg=t(this).attr(""+kitAttr+"lightboxUrl"),$lightBox=t(".Lightbox"),$lightBoxView=t(".Lightbox-view"),$lightBoxNav=t(".Lightbox-back, .Lightbox-next"),$lightBoxMobileNav=t(".Lightbox-mobile"),$lightBoxNumDisplay=t(".Lightbox-num"),$lightBoxCloseBtn=t(".Lightbox-close"),$lightBoxImg=t(".Lightbox-image"),$lightBoxTitle=t(".info_title, .mobile_title"),$lightBoxDesc=t(".info_desc, .mobile_desc"),A(),_(),I(),k(),$lightBoxCloseBtn.on("click",y),$lightBox.click(y).children().click(function(t){return!1}),$lightBoxNumDisplay.text(parseInt(g)+1+" de "+n),$lightBoxImg.append('<img class="image" src="'+currentImg+'">'),$lightBoxDesc.text(t(this).attr(""+kitAttr+"-lightboxDesc")),$lightBoxTitle.text(t(this).attr(""+kitAttr+"-lightboxTitle")),t("body").css({overflow:"hidden"}),b()},b=function(){$lightBox.fadeIn(300),$lightBoxView.find(".image").load(function(){v(),m(),f(),w(),$(),B(),$lightBoxView.css({opacity:1}),$lightBox.css({backgroundImage:"none"}),t(this).animate({opacity:1},200),u=!1,$lightBoxView.find(".image").unbind("load")})},f=function(){t(window).width()<=1025||LIGHTBOX.isTouch?($lightBoxNav.css({display:"none"}),$lightBoxMobileNav.css({display:"block"})):($lightBoxMobileNav.css({display:"none"}),view_height=$lightBoxView.height()/2,arrow_height=t(".Lightbox-back").outerHeight()/2,margin_top=view_height-arrow_height,$lightBoxNav.css({top:margin_top}),$lightBoxNav.delay(300).css({display:"block"}))},w=function(){t(window).width()<=1025||LIGHTBOX.isTouch?t(".Lightbox-info").css({display:"none"}):t(".Lightbox-info").css({display:"block"})},m=function(){window_height=t(window).height()/2,view_height=$lightBoxView.height()/2,view_top=window_height-view_height,t(".Lightbox-wrapper").css({marginTop:view_top})},v=function(){window_height=t(window).height()-l,view_height=$lightBoxView.height(),img_width=$lightBoxView.find(".image").width(),$lightBoxView.find("img").css({maxHeight:window_height}),img_width=$lightBoxView.find(".image").width(),t(".Lightbox-wrapper").css({maxWidth:img_width})},k=function(){function i(){h=t(window).height(),newWidtht=t(window).width(),h>s?(window_height=t(window).height()-l,difference=r-a,t(".Lightbox-wrapper").css({maxWidth:"100%"}),$lightBoxView.find("img").css({maxHeight:window_height}),img_width=$lightBoxView.find(".image").width(),t(".Lightbox-wrapper").css({maxWidth:img_width}),m(),f(),w(),s=h):(v(),m(),f(),w(),s=h)}s=t(window).height(),c=t(window).width();var o;t(window).resize(function(){clearTimeout(o),o=setTimeout(i,100)})},$=function(){t("#Lightbox-descBtn").on("click",function(){0==d?($lightBoxMobileNav.css({backgroundColor:"rgba(0, 0, 0, 0.75)"}),t(".Lightbox-mobile_info").fadeIn(),i(),d=!0):(i(),t(".Lightbox-mobile_info").fadeOut(function(){$lightBoxMobileNav.css({backgroundColor:"transparent"},200)}),d=!1)});var i=function(){t(".menu-title").find("img").attr("src","lib/ressources/lightbox/lightbox-desc.svg"),t(".menu-title").find("img").attr("onerror","lib/ressources/lightbox/lightbox-desc.png")}},B=function(){void 0==e[g].desc&&void 0==e[g].title?t(".Lightbox-info").css({display:"none"}):t(".Lightbox-info").css({display:"block"}),void 0==e[g].desc&&void 0==e[g].title&&0==d?t(".menu-title").css({opacity:.2,pointerEvents:"none"}):void 0==e[g].desc&&void 0==e[g].title&&1==d?t(".mobile_desc").text("Aucune description disponible pour cette photo..."):t(".menu-title").css({opacity:1,pointerEvents:"all"})},A=function(){t(".Lightbox-next, .Lightbox-next_mobile").click(function(){g<n-1?(g++,L()):(g=0,L())})},_=function(){t(".Lightbox-back, .Lightbox-back_mobile").click(function(){0==g?(g=n-1,L()):(g--,L())})},L=function(){$lightBoxImg.animate({opacity:0},200,function(){t(this).find(".image").attr("src",e[g].url),t(this).find(".image").load(function(){$lightBoxView.find("img").css({maxHeight:"100%"}),t(".Lightbox-wrapper").css({maxWidth:"100%"}),$lightBoxDesc.empty(),$lightBoxTitle.empty(),v(),m(),f(),B(),$lightBoxDesc.text(e[g].desc),$lightBoxTitle.text(e[g].title),$lightBoxNumDisplay.text(parseInt(g)+1+" de "+n),$lightBoxImg.animate({opacity:1},200),$lightBoxView.find(".image").unbind("load")})})},y=function(){$lightBox.animate({opacity:0},400,function(){$lightBox.remove(),t("body").css({overflow:"auto"}),t(document).unbind("keydown")})},I=function(){t(document).keydown(function(t){switch(t.which){case 37:0==g?(g=n-1,L()):(g--,L());break;case 39:g<n-1?(g++,L()):(g=0,L());break;case 27:y();break;default:return}t.preventDefault()})};return{init:function(){LIGHTBOX.isTouch="ontouchstart"in window||navigator.msMaxTouchPoints>0,o.each(function(o){t(this).attr(""+kitAttr+"lightboxPos",o),temp_url=t(this).attr(""+kitAttr+"lightboxurl"),temp_desc=t(this).attr(""+kitAttr+"lightboxdesc"),temp_title=t(this).attr(""+kitAttr+"lightboxtitle"),e[o]=new i(temp_url,temp_desc,temp_title),n++}),o.on("click",p)},ajaxInit:function(){t("["+kitAttr+"lightboxPos]").removeAttr(""+kitAttr+"lightboxPos"),o.unbind("click",b),o.on("click",b),o.each(function(o){t(this).attr(""+kitAttr+"lightboxPos",o),temp_url=t(this).attr(""+kitAttr+"lightboxurl"),temp_desc=t(this).attr(""+kitAttr+"lightboxdesc"),temp_title=t(this).attr(""+kitAttr+"lightboxtitle"),e[o]=new i(temp_url,temp_desc,temp_title),n++})}}}($),MASONRY=function(t){var i,o,e,n,s,h,c,r,a,l,d,g=t("["+kitAttr+'masonry="parent"]'),u=t("["+kitAttr+'masonry^="child"]'),x=g.width(),p=[],b=[],f=[],w=[],m=function(){x=g.width(),p=[],b=[],f=[],w=[],i=o=e=n=s=h=c=r=a=l=d=0,v()},v=function(){h=g.attr(""+kitAttr+"masonrynumcol"),o=g.attr(""+kitAttr+"masonrygutter"),s=g.attr(""+kitAttr+"masonrystopat"),a=g.attr(""+kitAttr+"masonryrespat"),r=g.attr(""+kitAttr+"masonryrespnumcol"),k()},k=function(){t(window).width()>=s&&t(window).width()>=a?$(h):t(window).width()<=s&&t(window).width()<=a?(g.css({height:"auto",width:"auto"}),u.css({width:"100%",left:"0",top:"0",position:"relative",opacity:"1"})):$(r)},$=function(i){for(var e=0;e<i;e++)w.push(0);u.css({position:"absolute"}),u.each(function(e,n){itemWidth=(x-(i-1)*o)/i,t(this).css("width",itemWidth),t(this).css("top",w[c]+l*o),t(this).css("left",itemWidth*c+o*c),f[c]=t(this).outerHeight(),w[c]=w[c]+f[c],c++,c==i&&(c=0,f=[],l++)}),d=Math.max.apply(Math,w)+l*o,g.css({height:d}),w=[],l=0};return{init:function(){t(window).load(function(){m()}),t(window).on("resize",function(){m()})},ajaxInit:function(){}}}($);